\documentclass[a4paper]{article}
\usepackage[T1]{fontenc}
\usepackage{framed}
\usepackage{color}

\definecolor{shadecolor}{gray}{0.95}
\begin{document}

\noindent\hrulefill test of \string\color\space versus page break\hrulefill

\vspace{18cm}

before

\begin{shaded}

aaa

\color{red}

am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
am I red?
\end{shaded}

after
\end{document}